# مراقب مواعيد فيزا إسبانيا التلقائي

تطبيق ويب ذكي لمراقبة وحجز مواعيد فيزا إسبانيا تلقائياً مع دعم الهواتف المحمولة والنشر السحابي.

## المميزات

- 🔄 **مراقبة تلقائية**: فحص المواعيد كل 30 دقيقة
- 📱 **متوافق مع الهواتف**: واجهة محسنة للهواتف المحمولة
- 🌐 **تطبيق ويب تقدمي (PWA)**: قابل للتثبيت على الهاتف
- ☁️ **جاهز للسحابة**: يدعم النشر على منصات سحابية مجانية
- 🔔 **إشعارات فورية**: تنبيهات عبر WhatsApp عند توفر المواعيد
- 💾 **قاعدة بيانات**: حفظ بيانات العملاء (SQLite محلياً، PostgreSQL سحابياً)
- 🔒 **آمن**: حماية البيانات وإدارة الجلسات

## التقنيات المستخدمة

- **Backend**: Python Flask
- **Frontend**: HTML5, CSS3, JavaScript, Bootstrap 5
- **Automation**: Selenium WebDriver
- **Database**: SQLite (محلي) / PostgreSQL (سحابي)
- **Deployment**: Gunicorn, Docker-ready
- **PWA**: Service Worker, Web App Manifest

## التثبيت المحلي

### المتطلبات
- Python 3.11+
- Google Chrome Browser
- ChromeDriver (يتم تثبيته تلقائياً)

### خطوات التثبيت

1. **استنساخ المشروع**
```bash
git clone <repository-url>
cd spain-visa-booking
```

2. **إنشاء بيئة افتراضية**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# أو
venv\\Scripts\\activate  # Windows
```

3. **تثبيت المتطلبات**
```bash
pip install -r requirements.txt
```

4. **إعداد متغيرات البيئة**
```bash
cp .env.example .env
# قم بتعديل ملف .env وإضافة القيم المطلوبة
```

5. **تشغيل التطبيق**
```bash
python app.py
```

6. **فتح التطبيق**
افتح المتصفح وانتقل إلى: `http://localhost:5000`

## النشر السحابي

### Railway (موصى به)

1. **إنشاء حساب على Railway**
   - انتقل إلى [railway.app](https://railway.app)
   - سجل دخول باستخدام GitHub

2. **نشر المشروع**
   ```bash
   # تثبيت Railway CLI
   npm install -g @railway/cli
   
   # تسجيل الدخول
   railway login
   
   # إنشاء مشروع جديد
   railway new
   
   # نشر التطبيق
   railway up
   ```

3. **إعداد متغيرات البيئة**
   - في لوحة تحكم Railway، انتقل إلى Variables
   - أضف المتغيرات التالية:
     ```
     SECRET_KEY=your-secret-key-here
     FLASK_ENV=production
     WHATSAPP_NUMBER=+1234567890
     ```

4. **إضافة قاعدة بيانات PostgreSQL**
   - في Railway، اضغط على "Add Service"
   - اختر "PostgreSQL"
   - سيتم إنشاء `DATABASE_URL` تلقائياً

### Render

1. **إنشاء حساب على Render**
   - انتقل إلى [render.com](https://render.com)

2. **إنشاء Web Service جديد**
   - اربط مستودع GitHub الخاص بك
   - اختر الإعدادات التالية:
     - **Build Command**: `pip install -r requirements.txt`
     - **Start Command**: `gunicorn app:app --bind 0.0.0.0:$PORT`

3. **إعداد متغيرات البيئة**
   ```
   SECRET_KEY=your-secret-key-here
   FLASK_ENV=production
   WHATSAPP_NUMBER=+1234567890
   PYTHON_VERSION=3.11.7
   ```

4. **إضافة قاعدة بيانات PostgreSQL**
   - أنشئ PostgreSQL database منفصلة
   - أضف `DATABASE_URL` إلى متغيرات البيئة

## الاستخدام

### للعملاء (الهواتف المحمولة)

1. **فتح التطبيق**
   - انتقل إلى رابط التطبيق السحابي
   - أو استخدم الرابط المحلي إذا كان يعمل على نفس الشبكة

2. **تثبيت التطبيق (PWA)**
   - في المتصفح، اضغط على "إضافة إلى الشاشة الرئيسية"
   - سيظهر التطبيق كتطبيق منفصل

3. **ملء البيانات**
   - أدخل جميع البيانات المطلوبة
   - تأكد من صحة رقم WhatsApp للإشعارات

4. **بدء المراقبة**
   - اضغط على "بدء المراقبة"
   - سيعمل التطبيق في الخلفية

## كيف يعمل النظام؟ 🔧

1. **المراقبة**: يدخل النظام لموقع BLS كل 30 دقيقة
2. **الفحص**: يبحث عن المواعيد المتاحة
3. **الإشعار**: يرسل رسالة WhatsApp عند العثور على موعد
4. **الحجز**: يملأ النموذج تلقائياً ويحجز الموعد
5. **التأكيد**: يرسل رسالة تأكيد بنجاح الحجز

## الملفات المهمة 📁

```
script/
├── app.py                 # التطبيق الرئيسي
├── templates/
│   └── index.html        # واجهة المستخدم
├── requirements.txt      # المكتبات المطلوبة
├── user_data.json       # بيانات المستخدم (يتم إنشاؤه تلقائياً)
└── README.md            # هذا الملف
```

## استكشاف الأخطاء 🔍

### مشكلة ChromeDriver
```bash
# إذا واجهت مشكلة في ChromeDriver
pip install --upgrade webdriver-manager
```

### مشكلة WhatsApp
- تأكد من تثبيت WhatsApp Web على جهازك
- قم بتسجيل الدخول لـ WhatsApp Web مرة واحدة

### مشكلة الاتصال
- تأكد من اتصال الإنترنت
- تحقق من عدم حجب الموقع

## الأمان والخصوصية 🔐

- ✅ جميع البيانات محفوظة محلياً فقط
- ✅ لا يتم إرسال البيانات لأي خادم خارجي
- ✅ كود مفتوح المصدر قابل للمراجعة
- ✅ استخدام آمن لواجهات برمجة التطبيقات

## نصائح مهمة 💡

1. **تأكد من البيانات**: راجع جميع البيانات قبل البدء
2. **اتصال مستقر**: تأكد من استقرار الإنترنت
3. **عدم الإغلاق**: لا تغلق التطبيق أثناء المراقبة
4. **النسخ الاحتياطي**: احتفظ بنسخة من بياناتك

## الدعم والمساعدة 🆘

إذا واجهت أي مشكلة:

1. تحقق من ملف `user_data.json` للبيانات المحفوظة
2. راجع رسائل الخطأ في Terminal
3. تأكد من تحديث Chrome إلى آخر إصدار
4. أعد تشغيل التطبيق في حالة توقفه

## إخلاء المسؤولية ⚠️

- هذا التطبيق للاستخدام الشخصي فقط
- المطور غير مسؤول عن أي مشاكل قد تحدث
- يُنصح بمراجعة شروط استخدام الموقع الرسمي
- استخدم التطبيق بمسؤولية وأخلاق

## الترخيص 📄

هذا المشروع مفتوح المصدر ومتاح للاستخدام الشخصي.

---

**ملاحظة**: تأكد من تحديث Chrome وتسجيل الدخول لـ WhatsApp Web قبل الاستخدام.

**رقم WhatsApp للإشعارات**: +212650731946